{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { Component } from \"react\";\nimport { Link } from \"../../../routes\";\nimport { Button, Table } from \"semantic-ui-react\";\nimport Layout from \"../../../components/Layout\";\nimport Campaign from \"../../../ethereum/campaign\";\nimport RequestRow from \"../../../components/RequestRow\";\n\nclass RequestsIndex extends Component {\n  static async getInitialProps(props) {\n    const {\n      address\n    } = props.query;\n    const campaign = Campaign(address);\n    const requestCount = await campaign.methods.getRequestCount().call();\n    const approversCount = await campaign.methods.approversCount().call();\n    const requests = await Promise.all(Array(parseInt(requestCount)).fill().map((element, index) => {\n      return campaign.methods.requests(index).call();\n    }));\n    return {\n      address,\n      requests,\n      requestCount,\n      approversCount\n    };\n  }\n\n  renderRow() {\n    return this.props.requests.map((request, index) => {\n      return __jsx(RequestRow, {\n        onRequestsUpdate: this.onRequestsUpdate,\n        request: request,\n        key: index,\n        id: index,\n        address: this.props.address,\n        approversCount: this.props.approversCount\n      });\n    });\n  }\n\n  render() {\n    return __jsx(Layout, null, __jsx(Link, {\n      route: `/campaigns/${this.props.address}`\n    }, __jsx(\"a\", null, \"Back\")), __jsx(\"h3\", null, \"Requests\"), __jsx(Link, {\n      route: `/campaigns/${this.props.address}/requests/new`\n    }, __jsx(\"a\", null, __jsx(Button, {\n      primary: true,\n      floated: \"right\",\n      style: {\n        marginBottom: 10\n      }\n    }, \"Add Request\"))), __jsx(Link, {\n      route: `/campaigns/${this.props.address}/requests/`\n    }, __jsx(\"a\", null, __jsx(Button, {\n      primary: true,\n      floated: \"left\",\n      style: {\n        marginBottom: 10\n      }\n    }, \"Refresh\"))), __jsx(Table, null, __jsx(Table.Header, null, __jsx(Table.Row, null, __jsx(Table.HeaderCell, null, \"ID\"), __jsx(Table.HeaderCell, null, \"Description\"), __jsx(Table.HeaderCell, null, \"Amount\"), __jsx(Table.HeaderCell, null, \"Recipient\"), __jsx(Table.HeaderCell, null, \"Approval Count\"), __jsx(Table.HeaderCell, null, \"Approve\"), __jsx(Table.HeaderCell, null, \"Finalize\"))), __jsx(Table.Body, null, this.renderRow())), __jsx(\"div\", null, \"Found \", this.props.requestCount, \" requests.\"));\n  }\n\n}\n\nexport default RequestsIndex;","map":null,"metadata":{},"sourceType":"module"}